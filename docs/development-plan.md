# 智能标的电报机器人项目开发计划

## 项目概述
基于Next.js + TypeScript + SQLite开发的电报机器人项目，用于管理加密货币标的关注和价格提醒功能。

## 技术栈
- 前端：Next.js + TypeScript + React
- 数据库：SQLite
- 电报机器人：node-telegram-bot-api
- 价格数据源：Binance REST API
- 部署：Docker
- 界面语言：中文

## 开发步骤

### 阶段1：项目基础架构搭建
1. **初始化Next.js项目**
   - 创建Next.js + TypeScript项目
   - 配置基础目录结构
   - 安装必要依赖

2. **数据库设计与初始化**
   - 设计数据库表结构（配置表、群组表、关注标的表、用户表等）
   - 创建SQLite数据库连接和初始化脚本
   - 创建数据库迁移文件
   - 初始化配置表数据（电报机器人token、默认价格阈值5%、管理员账号密码等）

3. **配置管理系统**
   - 创建配置表和配置管理模块
   - 实现配置的读取和更新功能

### 阶段2：电报机器人核心功能
4. **电报机器人基础框架**
   - 集成node-telegram-bot-api
   - 创建机器人基础架构和命令路由系统
   - 实现群组白名单验证机制

5. **标的管理功能**
   - 实现添加关注标的命令（/watch）
   - 实现查询关注标的列表命令（/list）
   - 实现取消关注命令（/unwatch）
   - 支持标的类型设置（现货、合约、alpha）

6. **价格数据集成**
   - 集成Binance REST API获取加密货币价格
   - 实现实时价格获取功能
   - 实现价格缓存机制
   - 支持现货、合约、alpha标的类型的价格获取

### 阶段3：价格监控与提醒系统
7. **定时任务系统**
   - 创建定时任务框架
   - 实现价格监控定时任务
   - 实现价格阈值检测逻辑

8. **消息提醒功能**
   - 实现价格变动提醒消息格式
   - 实现群组消息发送功能
   - 添加提醒频率控制机制

### 阶段4：后台管理系统
9. **后台登录系统**
   - 创建中文登录页面和API
   - 实现基于配置表的账号密码验证
   - 添加会话管理

10. **基础配置信息管理**
    - 创建配置管理页面（中文界面）
    - 实现电报机器人token配置功能
    - 实现价格阈值配置功能（支持自定义，默认5%）
    - 实现其他系统配置参数管理

11. **群组白名单管理**
    - 创建群组管理页面（中文界面）
    - 实现群组白名单的增删改查功能
    - 提供群组信息展示

12. **关注列表管理**
    - 创建关注列表管理页面（中文界面）
    - 实现按群组查看关注列表
    - 提供关注标的的管理功能（删除、修改阈值等）

### 阶段5：完善与优化
13. **错误处理与日志**
    - 完善错误处理机制
    - 添加日志记录功能
    - 实现异常情况的恢复机制

14. **性能优化**
    - 优化数据库查询
    - 实现API请求限流
    - 添加缓存机制

15. **Docker部署准备**
    - 创建Dockerfile
    - 创建docker-compose.yml
    - 配置生产环境变量
    - 编写Docker部署文档和脚本

